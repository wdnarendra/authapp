{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Narendra/Desktop/blog/blogging/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Narendra/Desktop/blog/blogging/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Narendra/Desktop/blog/blogging/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useNavigate,useLocation}from\"react-router-dom\";import React from\"react\";import{useState,useEffect}from\"react\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Home(){var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),userstate=_useState2[0],setuser=_useState2[1];var location=useLocation();useEffect(function(){if(!location.state){// console.log(\"on location null running\")\nif(!userstate.verify){// console.log(\"request send\")\nfetchdata();}}else{//  console.log(location.state)\nlocalStorage.setItem(\"jsontoken\",location.state.jsontoken);setuser(location.state);}},[]);function fetchdata(){return _fetchdata.apply(this,arguments);}function _fetchdata(){_fetchdata=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var options;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localStorage.getItem(\"jsontoken\")){_context.next=6;break;}options={method:'POST',header:{'Content-Type':'application/json'},body:JSON.stringify({\"jsontoken\":localStorage.getItem(\"jsontoken\")})};_context.next=4;return fetch('http://127.0.0.1/verifyjwt',options).then(function(res){return res.json();}).then(function(data){if(data.verify===\"false\"){navigate(\"/\");}else setuser(data);});case 4:_context.next=7;break;case 6:navigate(\"/\");case 7:case\"end\":return _context.stop();}}},_callee);}));return _fetchdata.apply(this,arguments);}if(userstate.userid)return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"welcome \",userstate.userid]}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){localStorage.clear();navigate(\"/\");},children:\"SignOut\"})]});}","map":{"version":3,"names":["useNavigate","useLocation","React","useState","useEffect","Home","navigate","userstate","setuser","location","state","verify","fetchdata","localStorage","setItem","jsontoken","getItem","options","method","header","body","JSON","stringify","fetch","then","res","json","data","userid","clear"],"sources":["C:/Users/Narendra/Desktop/blog/blogging/src/Home.jsx"],"sourcesContent":["import { useNavigate,useLocation } from \"react-router-dom\"\r\nimport React from \"react\"\r\nimport { useState ,useEffect } from \"react\";\r\nexport default  function Home (){\r\n    const navigate = useNavigate()\r\n    let [userstate,setuser]=useState({});\r\n   const location = useLocation()\r\n   useEffect(()=>{\r\n\r\n    if(!location.state)\r\n    {\r\n        // console.log(\"on location null running\")\r\n    \r\n        if(!userstate.verify){\r\n    // console.log(\"request send\")\r\n    fetchdata()}}\r\n    else{\r\n      //  console.log(location.state)\r\n        localStorage.setItem(\"jsontoken\",location.state.jsontoken)\r\n        setuser(location.state)\r\n    }\r\n   },[])\r\n   async function fetchdata (){if (localStorage.getItem(\"jsontoken\"))\r\n   {\r\n        const options ={\r\n            method:'POST',\r\n            header:{\r\n                'Content-Type':'application/json',\r\n            },\r\n            body:JSON.stringify({\"jsontoken\":localStorage.getItem(\"jsontoken\")})\r\n        }\r\n       await fetch('http://127.0.0.1/verifyjwt',options).then(res=>res.json()).then(data=>{\r\n       if(data.verify===\"false\"){\r\n            navigate(\"/\")\r\n        }   \r\n        else \r\n       setuser(data)\r\n            \r\n        })\r\n   \r\n    }\r\n    else\r\n    navigate(\"/\")\r\n}\r\n\r\nif(userstate.userid)\r\n    return <><h1>welcome {userstate.userid}</h1>\r\n    <button onClick={()=>{\r\n        localStorage.clear()\r\n        navigate(\"/\")\r\n    }}>SignOut</button>\r\n    </>\r\n   }\r\n\r\n\r\n"],"mappings":"uYAAA,OAASA,WAAT,CAAqBC,WAArB,KAAwC,kBAAxC,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,C,6IACA,cAAgB,SAASC,KAAT,EAAgB,CAC5B,GAAMC,SAAQ,CAAGN,WAAW,EAA5B,CACA,cAAwBG,QAAQ,CAAC,EAAD,CAAhC,wCAAKI,SAAL,eAAeC,OAAf,eACD,GAAMC,SAAQ,CAAGR,WAAW,EAA5B,CACAG,SAAS,CAAC,UAAI,CAEb,GAAG,CAACK,QAAQ,CAACC,KAAb,CACA,CACI;AAEA,GAAG,CAACH,SAAS,CAACI,MAAd,CAAqB,CACzB;AACAC,SAAS,GAAG,CAAC,CANb,IAOI,CACF;AACEC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAiCL,QAAQ,CAACC,KAAT,CAAeK,SAAhD,EACAP,OAAO,CAACC,QAAQ,CAACC,KAAV,CAAP,CACH,CACD,CAdQ,CAcP,EAdO,CAAT,CAJ6B,QAmBdE,UAnBc,uIAmB7B,qJAAgCC,YAAY,CAACG,OAAb,CAAqB,WAArB,CAAhC,yBAEWC,OAFX,CAEoB,CACXC,MAAM,CAAC,MADI,CAEXC,MAAM,CAAC,CACH,eAAe,kBADZ,CAFI,CAKXC,IAAI,CAACC,IAAI,CAACC,SAAL,CAAe,CAAC,YAAYT,YAAY,CAACG,OAAb,CAAqB,WAArB,CAAb,CAAf,CALM,CAFpB,uBASUO,MAAK,CAAC,4BAAD,CAA8BN,OAA9B,CAAL,CAA4CO,IAA5C,CAAiD,SAAAC,GAAG,QAAEA,IAAG,CAACC,IAAJ,EAAF,EAApD,EAAkEF,IAAlE,CAAuE,SAAAG,IAAI,CAAE,CACnF,GAAGA,IAAI,CAAChB,MAAL,GAAc,OAAjB,CAAyB,CACpBL,QAAQ,CAAC,GAAD,CAAR,CACH,CAFF,IAIAE,QAAO,CAACmB,IAAD,CAAP,CAEE,CAPI,CATV,qCAoBCrB,QAAQ,CAAC,GAAD,CAAR,CApBD,sDAnB6B,4CA0ChC,GAAGC,SAAS,CAACqB,MAAb,CACI,mBAAO,wCAAE,iCAAarB,SAAS,CAACqB,MAAvB,GAAF,cACP,eAAQ,OAAO,CAAE,kBAAI,CACjBf,YAAY,CAACgB,KAAb,GACAvB,QAAQ,CAAC,GAAD,CAAR,CACH,CAHD,qBADO,GAAP,CAMA"},"metadata":{},"sourceType":"module"}